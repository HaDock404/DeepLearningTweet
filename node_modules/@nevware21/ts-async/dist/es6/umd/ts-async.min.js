/*!
 * NevWare21 - ts-async, 0.4.0
 * https://github.com/nevware21/ts-async
 * Copyright (c) NevWare21 and contributors. All rights reserved.
 * Licensed under the MIT license.
 */
function e(e){"use strict";const a=void 0,s=null,D="",q="function",$="object",u="prototype",F="__proto__",t="undefined",H="Symbol",J="length",L="name";var n="slice";const r=Object,U=r[u];var W=String,o=(i=Array)[u];function B(t){return function(e){return typeof e===t}}function G(e){return U.toString.call(e)}function j(e){return typeof e===t||e===t}const R=B(q);function K(e){var t;return(e||(t=e)!==s&&!j(t))&&e&&typeof e===$}const M=i.isArray,Q=B("number"),V=function(e){return!(!e||"[object Error]"!==G(e))};function I(e){return e&&R(e.then)}const X=r.getOwnPropertyDescriptor,Y=r.hasOwn||function(e,t){return r=t,(n=e)&&U.hasOwnProperty.call(n,r)||!!X(e,t);var n,r};function c(e,t,n){if(e&&K(e))for(const r in e)if(Y(e,r)&&-1===t.call(n||e,r,e[r]))break}function Z(e){throw new TypeError(e)}const ee=r.freeze;function te(e){return ee&&c(e,(e,t)=>{(M(t)||K(t))&&ee(t)}),ne(e)}const ne=ee||(e=>e),re=r.getPrototypeOf||(e=>e[F]||s),oe=function(){{var e=te;let n={};return c({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12},(e,t)=>{n[e]=e,n[t]=e}),e(n)}}(),ce=W,ie="__tsUtils$gblCfg";let le;function ue(){var e;return(e=(e=(e=typeof globalThis!==t?globalThis:void 0)||typeof self===t?e:self)||typeof window===t?e:window)||typeof global===t?e:global}function T(e,t){let n=D;if(V(e))n="{ stack: '"+e.stack+"', message: '"+e.message+"', name: '"+e.name+"'";else try{n=JSON.stringify(e,s,t?Q(t)?t:4:a)}catch(e){n=" - "+T(e,t)}return G(e)+": "+n}const ae=o[n];var se,fe,i=(n,e)=>{let r=e&&e[n];return function(e){var t=e&&e[n]||r;if(t)return t.apply(e,ae.call(arguments,1));t=n,e=e,Z("'"+ce(t)+"' not defined for "+T(e))}};let ve={};const de={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"},A=r.defineProperty;function ye(e,t,n){A(e,t,function(t){let n={};var e;return n[de.c]=!0,n[de.e]=!0,t.l&&(n.get=()=>t.l.v,e=X(t.l,"v"))&&e.set&&(n.set=e=>{t.l.v=e}),c(t,(e,t)=>{n[de[e]]=j(t)?n[de[e]]:t}),n}(n))}let E,pe=function(){var e;E=(le||(e=ue()||{},le=e[ie]=e[ie]||{}),le),pe=s};function me(t){let n={};return pe&&pe(),n.b=E.lzy,A(n,"v",{configurable:!0,get:function(){var e=t();return E.lzy||(A(n,"v",{value:e}),n.b&&delete n.b),E.lzy&&n.b!==E.lzy&&(n.b=E.lzy),e}}),n}function k(n,r){return me(()=>{{var t=n;let e=r;try{e=t()}catch(e){}return e}})}let l,f,he,ge;const z=e=>k(()=>we(e)||a,a),be=e=>(l=!l||!1===e||E&&E.lzy&&!l.b?k(ue,s):l).v,we=(e,t)=>{t=l&&!1!==t?l.v:be(t);return t&&t[e]?t[e]:"window"===e&&f?f.v:s},Pe=()=>(he=!he||E&&E.lzy&&!he.b?z("document"):he).v,Se=()=>(f=!f||E&&E.lzy&&!f.b?z("window"):f).v,je=()=>(ge=ge||k(()=>!(!process||!(process.versions||{}).node),!1)).v;let O,Re,Ie;function Te(e){return k(function(){return O.v?O.v[e]:a},a)}function Ae(){var e=!O||E&&E.lzy&&!O.b;return e&&(O=z(H)),Re&&!e||(Re=Te("for")),Ie&&!e||(Ie=Te("keyFor")),O.v}se="apply";const v=function(e){return e[se].apply(e,ae.call(arguments,1))};function Ee(t,n,r){if(t){var o=t[J]>>>0;for(let e=0;e<o&&!(e in t&&-1===n.call(r||t,t[e],e,t));e++);}}const ke=i("indexOf",o),C=(i("lastIndexOf",o),i(n,o)),ze=r.create||function(e){if(!e)return{};var t=typeof e;if(t!==$&&t!=q)throw new TypeError("Prototype must be an Object or function: "+T(e));function n(){}return n[u]=e,new n};let Oe;function Ce(e,t){return(r.setPrototypeOf||function(n,e){(Oe=Oe||me(()=>({[F]:[]})instanceof Array)).v?n[F]=e:c(e,(e,t)=>n[e]=t)})(e,t)}const xe=(e,t)=>{try{t&&(e[L]=t)}catch(e){}},_e=(e,t)=>{try{ye(e,L,{v:t,c:!0,e:!1})}catch(e){}};function m(){return(Date.now||Ne)()}function Ne(){return(new Date).getTime()}function h(e){return e[fe]}fe=J;let De;function qe(){var e=(De=!De||!De.b&&E&&E.lzy?z("performance"):De).v;return e&&e.now?e.now():m()}const $e="unref",Fe="hasRef",He="enabled";function Je(e,t,n){let r=!0,o=e?t(s):s,c;const i=()=>(r=!1,o&&o[$e]&&o[$e](),c),l=()=>(o=t(o),r||i(),c),u=()=>{o&&n(o),o=s};return c={cancel:u,refresh:l,hasRef:()=>o&&o[Fe]?o[Fe]():r,ref:()=>(r=!0,o&&o.ref&&o.ref(),c),unref:i,enabled:!1},A(c,He,{get:()=>!!o,set:e=>{!e&&o&&u(),e&&!o&&l()}}),{h:c,dn:()=>{o=s}}}function x(){{var o=this,c=a,i=C(arguments),l=M(c),u=l?c.length:0;let t=(0<u?c[0]:l?a:c)||setTimeout,n=(1<u?c[1]:a)||clearTimeout,e=i[0],r=(i[0]=function(){r.dn(),v(e,o,C(arguments))},Je(!0,e=>{if(e){if(e.refresh)return e.refresh(),e;v(n,o,[e])}return v(t,o,i)},function(e){v(n,o,[e])}));return r.h}}let Le,Ue=100,We=50;function Be(e,t){return Ge(e,e=>t?t({value:e,rejected:!1}):e,e=>t?t({rejected:!0,reason:e}):e)}function Ge(e,t,n,r){let o=e;return I(e)?(t||n)&&(o=e.then(t,n)):t&&(o=t(e)),r&&Ke(o,r),o}function Ke(e,t){let n=e;return t&&(I(e)?n=e.finally?e.finally(t):e.then(function(e){return t(),e},function(e){throw t(),e}):t()),n}let Me,Qe,Ve,Xe=!1;const Ye=["pending","resolving","resolved","rejected"],Ze="dispatchEvent";let et;const tt="Promise",nt="unhandledRejection",rt=nt.toLowerCase();let _=[],ot=0,ct=10,it;function lt(e){return R(e)?e.toString():T(e)}function ut(e,t,n){let r=C(arguments,3),i=0,l=!1,u,a=[],s=ot++,o=0<_.length?_[_.length-1]:void 0,f=!1,v=null,c;it=it||z(tt+"RejectionEvent");const d=(o,c)=>{try{return _.push(s),f=!0,v&&v.cancel(),v=null,e(function(n,r){a.push(function(){try{var e=2===i?o:c,t=j(e)?u:R(e)?e(u):e;I(t)?t.then(n,r):(e||3!==i?n:r)(t)}catch(e){r(e)}}),l&&b()},r)}finally{_.pop()}};var y,p,m,h;const g=()=>Ye[i],b=()=>{var e;0<a.length&&(e=a.slice(),a=[],f=!0,t(e),v&&v.cancel(),v=null)},w=(t,n)=>e=>{i===n&&(2===t&&I(e)?(i=1,e.then(w(2,1),w(3,1))):(i=t,l=!0,u=e,b(),f||3!==t||(v=v||x(P,ct))))},P=()=>{if(!f)if(je())process.emit(nt,u,c);else{var e=Se()||be(),n=rt,r=!!it.v;let t=Pe();r=(et=et||k(()=>{var e;return!!(e=t&&t.createEvent?t.createEvent("Event"):void 0)&&e.initEvent},null)).v?t.createEvent("Event"):r?new Event(n):{};ye(o=r,"promise",{g:()=>c}),o.reason=u,et.v&&r.initEvent(n,!1,!0),r&&e[Ze]?e[Ze](r):(o=e["on"+n])?o(r):(e=we("console"))&&(e.error||e.log)(n,T(r))}var o};c={then:d,catch:e=>d(void 0,e),finally:t=>{let e=t,n=t;return R(t)&&(e=function(e){return t&&t(),e},n=function(e){throw t&&t(),e}),d(e,n)}},A(c,"state",{get:g}),Xe&&(S=c,p=g,h=()=>G(u),y=()=>f,Me=Me||{toString:()=>"[[PromiseState]]"},Qe=Qe||{toString:()=>"[[PromiseResult]]"},Ve=Ve||{toString:()=>"[[PromiseIsHandled]]"},A(S,Me,{get:p}),A(S,Qe,{get:h}),A(S,Ve,{get:y})),Ae()&&(c[p=oe[11],O&&(!E.lzy||O.b)||Ae(),O.v?O.v[p||11]:(h=oe[11])?ve[h]=ve[h]||(m=H+"."+h,{description:ce(m),toString:()=>H+"("+m+")",_polyfill:!0}):void 0]="IPromise"),c.toString=()=>"IPromise"+(Xe?"["+s+(j(o)?"":":"+o)+"]":"")+" "+g()+(l?" - "+lt(u):""),R(n)||Z(tt+": executor is not a function - "+lt(n));var S=w(3,0);try{n.call(c,w(2,0),S)}catch(e){S(e)}return c}function d(n){return function(e){var t=C(arguments,1);return n((o,c)=>{try{let n=[],r=1;Ee(e,(e,t)=>{e&&(r++,Ge(e,e=>{n[t]=e,0==--r&&o(n)},c))}),0==--r&&o(n)}catch(e){c(e)}},t)}}function y(n){return function(t){var e=C(arguments,1);return I(t)?t:n(e=>{e(t)},e)}}function p(t){return function(n){var e=C(arguments,1);return t((e,t)=>{t(n)},e)}}const at=e=>{Ee(e,e=>{try{e()}catch(e){}})};function g(e,t){return ut(g,function(e){let t=Q(e)?e:0;return e=>{x(()=>{at(e)},t)}}(t),e,t)}W=d(g),i=y(g),n=p(g);let st;function b(e,t){var n=(st=st||z(tt)).v;if(!n)return g(e);R(e)||Z(tt+": executor is not a function - "+T(e));let r=0;n=new n((t,n)=>{e(function(e){r=2,t(e)},function(e){r=3,n(e)})});return A(n,"state",{get:function(){return Ye[r]}}),n}var o=d(b),ft=y(b),vt=p(b);function w(e){return ut(w,at,e)}var dt=d(w),yt=y(w),pt=p(w);let mt;function P(e,t){var n=j(t)?mt:t;return ut(P,function(){let c;return 0<=n&&(c={timeout:+n}),t=>{var n=e=>{at(t)},r=c;function o(e){let t=qe();return{didTimeout:e,timeRemaining:()=>{return We-(e=t,qe()-e);var e}}}if((Le=Le||k(()=>{return!!(e=requestIdleCallback)||e!==a;var e},!1)).v&&requestIdleCallback){let t=Je(!0,e=>(e&&cancelIdleCallback(e),requestIdleCallback(e=>{t.dn(),n(e||o(!1))},r)),e=>{cancelIdleCallback(e)});void t.h}else{var e=(r||{}).timeout;x(()=>{n(o(!0))},j(e)?Ue:e)}}}(),e,n)}var ht=d(P),gt=y(P),bt=p(P);let wt;function S(e,t){return(wt=wt||me(()=>b)).v.call(this,e,t)}var Pt=d(S),St=y(S),jt=p(S);const N="reject",Rt="Rejected";let It=0,Tt,At,Et={};const kt=()=>{};var zt=(e,t,n)=>{Et[e]||(Et[e]=function(r){let o=Error,c=o[u][L],i=Error.captureStackTrace;return t=r,n=function(){var e=this;try{xe(o,r);var t,n=v(o,e,C(arguments))||e;return n!==e&&(t=re(e))!==re(n)&&Ce(n,t),i&&i(n,e.constructor),n}finally{xe(o,c)}},l=o,_e(n,t),(n=Ce(n,l))[u]=l===s?ze(l):(e[u]=l[u],new e),n;function e(){this.constructor=n,_e(this,t)}var t,n,l}(e));var r=m();return new Et[e](`Task [${t.id}] ${n||""}- ${t.st?"Running":"Waiting"}: `+(r-(t.st||t.cr)||"0")+" ms")};function Ot(e,t){let n=m()-t;Ee(e,e=>{(e&&!e.rj&&e.st&&e.st<n||!e.st&&e.cr&&e.cr<n)&&e&&e[N](e.rj||zt("Aborted",e,"Stale "))})}function Ct(e,t){t=ke(e,t);-1!==t&&e.splice(t,1)}e.createAllPromise=Pt,e.createAsyncAllPromise=W,e.createAsyncPromise=g,e.createAsyncRejectedPromise=n,e.createAsyncResolvedPromise=i,e.createIdleAllPromise=ht,e.createIdlePromise=P,e.createIdleRejectedPromise=bt,e.createIdleResolvedPromise=gt,e.createNativeAllPromise=o,e.createNativePromise=b,e.createNativeRejectedPromise=vt,e.createNativeResolvedPromise=ft,e.createPromise=S,e.createRejectedPromise=jt,e.createResolvedPromise=St,e.createSyncAllPromise=dt,e.createSyncPromise=w,e.createSyncRejectedPromise=pt,e.createSyncResolvedPromise=yt,e.createTaskScheduler=function(u,e){let a,t=[],s=[],n,r,f=0,v=(e?e+".":"")+It++,o;u=u||S;const d=()=>{var e=0<h(t)+h(s);0<n&&(o||(o=x(()=>{Ot(t,n),Ot(s,n),o&&(o.enabled=0<h(t)+h(s))},r)).unref(),o)&&(o.enabled=e)},y=(c,i)=>(c.st=m(),t.push(c),d(),(t,n)=>{const r=e=>{c.rj=c.rj||e||zt(Rt,c),c[N]=kt,l(c),t=null,n&&n(e),n=null};var e=c.id;if(c.rj)r(c.rj);else{c[N]=r;try{var o=i(e);c.to&&I(o)&&(c.t=x(()=>{r(zt("Timeout",c))},c.to)),Ge(o,e=>{l(c),n=null,t&&t(e),t=null},r)}catch(e){r(e)}}}),l=e=>{Ct(t,e),e.t&&e.t.cancel(),e.t=null,a&&a===e&&(a=null,h(t)+h(s)===0)&&(o&&o.cancel(),o=null)};var c,i,p,e={idle:!0,queue:(e,t,n)=>{let r=v+"."+f++,o=(t&&(r+="-("+t+")"),{id:r,cr:m(),to:n,[N]:e=>{o.rj=e||zt(Rt,o),o[N]=kt}});var c,i,l;return a?o.p=(c=o,i=a,l=e,s.push(c),d(),u((e,t)=>{c.id,i.id,Be(i.p,()=>{Ct(s,c),y(c,l)(e,t)})})):o.p=u(y(o,e)),(a=o).p},setStaleTimeout:(e,t)=>{o&&o.cancel(),o=null,n=e,r=t||e/10,d()}};return ye(e,"idle",{g:()=>h(t)+h(s)===0}),c=e,i=()=>v,p=()=>({l:a,r:t,w:s}),Tt=Tt||{toString:()=>"[[SchedulerName]]"},At=At||{toString:()=>"[[SchedulerState]]"},A(c,Tt,{get:i}),A(c,At,{get:p}),e},e.doAwait=Ge,e.doAwaitResponse=Be,e.doFinally=Ke,e.setCreatePromiseImpl=function(e){wt=e?me(()=>e):null},e.setDetaultIdleTimeout=function(e){mt=e},e.setPromiseDebugState=function(e,t){Xe=e}}var t=this;"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(((t="undefined"!=typeof globalThis?globalThis:t||self).nevware21=t.nevware21||{},t.nevware21["ts-async"]={}));
//# sourceMappingURL=ts-async.min.js.map

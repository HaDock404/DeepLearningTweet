/*!
 * NevWare21 - ts-async, 0.4.0
 * https://github.com/nevware21/ts-async
 * Copyright (c) NevWare21 and contributors. All rights reserved.
 * Licensed under the MIT license.
 */
"use strict";var f=void 0,s=null,D="",q="function",F="object",v="prototype",H="__proto__",t="undefined",J="constructor",L="Symbol",U="length",W="name",$="slice",e=Object,B=e[v],G=String,n=Array,r=n[v];function K(t){return function(n){return typeof n===t}}function M(n){return B.toString.call(n)}function x(n){return typeof n===t||n===t}var S=K(q);function Q(n){return(n||n!==s&&!x(n))&&n&&typeof n===F}var V=n.isArray,X=K("number"),Y=function(n){return!(!n||"[object Error]"!==M(n))};function j(n){return n&&S(n.then)}var Z=e.getOwnPropertyDescriptor,nn=e.hasOwn||function(n,t){return n&&B.hasOwnProperty.call(n,t)||!!Z(n,t)};function u(n,t,e){if(n&&Q(n))for(var r in n)if(nn(n,r)&&-1===t.call(e||n,r,n[r]))break}function tn(n){throw new TypeError(n)}var en=e.freeze,n=en||function(n){return n},rn=e.getPrototypeOf||function(n){return n[H]||s},on={};u({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12},function(n,t){on[n]=n,on[t]=n});lt=on,en&&u(lt,function(n,t){(V(t)||Q(t))&&en(t)});var un,cn=n(lt),an=G,fn="__tsUtils$gblCfg";function ln(){var n;return(n=(n=(n=typeof globalThis!==t?globalThis:n)||typeof self===t?n:self)||typeof window===t?n:window)||typeof global===t?n:global}function R(n,t){var e=D;if(Y(n))e="{ stack: '"+n.stack+"', message: '"+n.message+"', name: '"+n.name+"'";else try{e=JSON.stringify(n,s,t?X(t)?t:4:f)}catch(n){e=" - "+R(n,t)}return M(n)+": "+e}function sn(e,n){var r=n&&n[e];return function(n){var t=n&&n[e]||r;if(t)return t.apply(n,vn.call(arguments,1));t=n,tn("'"+an(e)+"' not defined for "+R(t))}}var I,vn=r[$],pn={},c={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"},A=e.defineProperty;function dn(n,t,e){var r,o;A(n,t,(r=e,(o={})[c.c]=!0,o[c.e]=!0,r.l&&(o.get=function(){return r.l.v},n=Z(r.l,"v"))&&n.set&&(o.set=function(n){r.l.v=n}),u(r,function(n,t){o[c[n]]=x(t)?o[c[n]]:t}),o))}var yn=function(){var n;un||(n=ln()||{},un=n[fn]=n[fn]||{}),I=un,yn=s};function o(t){var e={};return yn&&yn(),e.b=I.lzy,A(e,"v",{configurable:!0,get:function(){var n=t();return I.lzy||(A(e,"v",{value:n}),e.b&&delete e.b),I.lzy&&e.b!==I.lzy&&(e.b=I.lzy),n}}),e}function E(e,r){return o(function(){var n=e,t=r;try{t=n()}catch(n){}return t})}var i,a,mn,hn,T,gn,bn,k=function(n){return E(function(){return wn(n)||f},f)},Pn=function(n){return(i=!i||!1===n||I&&I.lzy&&!i.b?E(ln,s):i).v},wn=function(n,t){t=i&&!1!==t?i.v:Pn(t);return t&&t[n]?t[n]:"window"===n&&a?a.v:s},xn=function(){return(a=!a||I&&I.lzy&&!a.b?k("window"):a).v},Sn=function(){return(hn=hn||E(function(){return!(!process||!(process.versions||{}).node)},!1)).v};function jn(n){return E(function(){return T.v?T.v[n]:f},f)}function Rn(){var n=!T||I&&I.lzy&&!T.b;return n&&(T=k(L)),gn&&!n||(gn=jn("for")),bn&&!n||(bn=jn("keyFor")),T.v}var p=function(n){return n.apply.apply(n,vn.call(arguments,1))};function In(n,t,e){if(n)for(var r=n[U]>>>0,o=0;o<r&&!(o in n&&-1===t.call(e||n,n[o],o,n));o++);}var An,En=sn("indexOf",r),z=(sn("lastIndexOf",r),sn($,r)),Tn=e.create||function(n){if(!n)return{};var t=typeof n;if(t!==F&&t!=q)throw new TypeError("Prototype must be an Object or function: "+R(n));function e(){}return e[v]=n,new e};function kn(n,t){return(e.setPrototypeOf||function(e,n){(An=An||o(function(){var n={};return n[H]=[],n instanceof Array})).v?e[H]=n:u(n,function(n,t){return e[n]=t})})(n,t)}function zn(n,t){try{t&&(n[W]=t)}catch(n){}}function On(n,t){try{dn(n,W,{v:t,c:!0,e:!1})}catch(n){}}function m(){return(Date.now||Cn)()}function Cn(){return(new Date).getTime()}function h(n){return n[Nn]}var _n,Nn=U;function Dn(){var n=(_n=!_n||!_n.b&&I&&I.lzy?k("performance"):_n).v;return n&&n.now?n.now():m()}var qn,Fn="unref",Hn="hasRef",Jn="enabled";function Ln(n,t,e){function r(){return i=!1,a&&a[Fn]&&a[Fn](),c}function o(){return a=t(a),i||r(),c}function u(){a&&e(a),a=s}var c,i=!0,a=n?t(s):s,n={cancel:u,refresh:o,hasRef:function(){return a&&a[Hn]?a[Hn]():i},ref:function(){return i=!0,a&&a.ref&&a.ref(),c}};return n[Fn]=r,n[Jn]=!1,A(c=n,Jn,{get:function(){return!!a},set:function(n){!n&&a&&u(),n&&!a&&o()}}),{h:c,dn:function(){a=s}}}function O(){return t=this,n=f,e=z(arguments),o=(r=V(n))?n.length:0,u=(0<o?n[0]:r?f:n)||setTimeout,c=(1<o?n[1]:f)||clearTimeout,i=e[0],e[0]=function(){a.dn(),p(i,t,z(arguments))},(a=Ln(!0,function(n){if(n){if(n.refresh)return n.refresh(),n;p(c,t,[n])}return p(u,t,e)},function(n){p(c,t,[n])})).h;var t,n,e,r,o,u,c,i,a}var Un,Wn,$n,Bn=100,Gn=50;function Kn(n,t){return Mn(n,function(n){return t?t({value:n,rejected:!1}):n},function(n){return t?t({rejected:!0,reason:n}):n})}function Mn(n,t,e,r){var o=n;return j(n)?(t||e)&&(o=n.then(t,e)):t&&(o=t(n)),r&&Qn(o,r),o}function Qn(n,t){var e=n;return t&&(j(n)?e=n.finally?n.finally(t):n.then(function(n){return t(),n},function(n){throw t(),n}):t()),e}var Vn,Xn,Yn=!1,Zn=["pending","resolving","resolved","rejected"],nt="dispatchEvent",tt="Promise",et="unhandledRejection",rt=et.toLowerCase(),C=[],ot=0,ut=10;function ct(n){return S(n)?n.toString():R(n)}function it(n,t,e){function r(o,u){try{return C.push(m),g=!0,b&&b.cancel(),b=null,n(function(e,r){y.push(function(){try{var n=2===p?o:u,t=x(n)?a:S(n)?n(a):n;j(t)?t.then(e,r):(n||3!==p?e:r)(t)}catch(n){r(n)}}),d&&c()},v)}finally{C.pop()}}function o(){return Zn[p]}function c(){var n;0<y.length&&(n=y.slice(),y=[],g=!0,t(n),b&&b.cancel(),b=null)}function u(t,e){return function(n){p===e&&(2===t&&j(n)?(p=1,n.then(u(2,1),u(3,1))):(p=t,d=!0,a=n,c(),g||3!==t||(b=b||O(i,ut))))}}function i(){var n,t,e,r,o;g||(Sn()?process.emit(et,a,P):(e=xn()||Pn(),n=rt,o=function(n){return dn(n,"promise",{g:function(){return P}}),n.reason=a,n},t=!!Xn.v,r=(mn=!mn||I&&I.lzy&&!mn.b?k("document"):mn).v,o(o=(Vn=Vn||E(function(){var n;return!!(n=r&&r.createEvent?r.createEvent("Event"):n)&&n.initEvent},null)).v?r.createEvent("Event"):t?new Event(n):{}),Vn.v&&o.initEvent(n,!1,!0),o&&e[nt]?e[nt](o):(t=e["on"+n])?t(o):(e=wn("console"))&&(e.error||e.log)(n,R(o))))}var a,f,l,s,v=z(arguments,3),p=0,d=!1,y=[],m=ot++,h=0<C.length?C[C.length-1]:void 0,g=!1,b=null,P=(Xn=Xn||k(tt+"RejectionEvent"),{then:r,catch:function(n){return r(void 0,n)},finally:function(t){var n=t,e=t;return S(t)&&(n=function(n){return t&&t(),n},e=function(n){throw t&&t(),n}),r(n,e)}}),w=(A(P,"state",{get:o}),Yn&&(f=function(){return M(a)},w=function(){return g},Wn=Wn||{toString:function(){return"[[PromiseResult]]"}},$n=$n||{toString:function(){return"[[PromiseIsHandled]]"}},A(s=P,Un=Un||{toString:function(){return"[[PromiseState]]"}},{get:o}),A(s,Wn,{get:f}),A(s,$n,{get:w})),Rn()&&(P[f=cn[11],T&&(!I.lzy||T.b)||Rn(),T.v?T.v[f||11]:(s=cn[11])?pn[s]=pn[s]||{description:an(l=L+"."+s),toString:function(){return L+"("+l+")"},_polyfill:!0}:void 0]="IPromise"),P.toString=function(){return"IPromise"+(Yn?"["+m+(x(h)?"":":"+h)+"]":"")+" "+o()+(d?" - "+ct(a):"")},S(e)||tn(tt+": executor is not a function - "+ct(e)),u(3,0));try{e.call(P,u(2,0),w)}catch(n){w(n)}return P}function l(e){return function(n){var t=z(arguments,1);return e(function(e,r){try{var o=[],u=1;In(n,function(n,t){n&&(u++,Mn(n,function(n){o[t]=n,0==--u&&e(o)},r))}),0==--u&&e(o)}catch(n){r(n)}},t)}}function d(e){return function(t){var n=z(arguments,1);return j(t)?t:e(function(n){n(t)},n)}}function y(t){return function(e){var n=z(arguments,1);return t(function(n,t){t(e)},n)}}function at(n){In(n,function(n){try{n()}catch(n){}})}function g(n,t){return it(g,(r=X(e=t)?e:0,function(n){O(function(){at(n)},r)}),n,t);var e,r}var ft,n=l(g),lt=d(g),G=y(g);function b(n,t){var e=(ft=ft||k(tt)).v;if(!e)return g(n);S(n)||tn(tt+": executor is not a function - "+R(n));var r=0,e=new e(function(t,e){n(function(n){r=2,t(n)},function(n){r=3,e(n)})});return A(e,"state",{get:function(){return Zn[r]}}),e}var $=l(b),r=d(b),st=y(b);function P(n){return it(P,at,n)}var vt,pt=l(P),dt=d(P),yt=y(P);function w(n,t){var c,t=x(t)?vt:t;return it(w,(0<=t&&(c={timeout:+t}),function(t){var e,n,r=function(n){at(t)},o=c;function u(n){var t=Dn();return{didTimeout:n,timeRemaining:function(){return Gn-(n=t,Dn()-n);var n}}}(qn=qn||E(function(){return!!(n=requestIdleCallback)||n!==f;var n},!1)).v&&requestIdleCallback?(e=Ln(!0,function(n){return n&&cancelIdleCallback(n),requestIdleCallback(function(n){e.dn(),r(n||u(!1))},o)},function(n){cancelIdleCallback(n)})).h:O(function(){r(u(!0))},x(n=(o||{}).timeout)?Bn:n)}),n,t)}var mt,ht=l(w),gt=d(w),bt=y(w);function _(n,t){return(mt=mt||o(function(){return b})).v.call(this,n,t)}function Pt(){}function wt(n,t,e){function r(){this.constructor=u,On(this,o)}var o,u;Tt[n]||(Tt[n]=(a=(i=Error)[v][W],f=Error.captureStackTrace,l=i,On(u=function(){var n=this;try{zn(i,c);var t,e=p(i,n,z(arguments))||n;return e!==n&&(t=rn(n))!==rn(e)&&kn(e,t),f&&f(e,n[J]),e}finally{zn(i,a)}},o=c=n),(u=kn(u,l))[v]=l===s?Tn(l):(r[v]=l[v],new r),u));var c,i,a,f,l=m();return new Tt[n]("Task [".concat(t.id,"] ").concat(e||"","- ").concat(t.st?"Running":"Waiting",": ").concat((l-(t.st||t.cr)||"0")+" ms"))}var xt,St,jt=l(_),Rt=d(_),It=y(_),N="reject",At="Rejected",Et=0,Tt={};function kt(n,t){var e=m()-t;In(n,function(n){(n&&!n.rj&&n.st&&n.st<e||!n.st&&n.cr&&n.cr<e)&&n&&n[N](n.rj||wt("Aborted",n,"Stale "))})}function zt(n,t){t=En(n,t);-1!==t&&n.splice(t,1)}exports.createAllPromise=jt,exports.createAsyncAllPromise=n,exports.createAsyncPromise=g,exports.createAsyncRejectedPromise=G,exports.createAsyncResolvedPromise=lt,exports.createIdleAllPromise=ht,exports.createIdlePromise=w,exports.createIdleRejectedPromise=bt,exports.createIdleResolvedPromise=gt,exports.createNativeAllPromise=$,exports.createNativePromise=b,exports.createNativeRejectedPromise=st,exports.createNativeResolvedPromise=r,exports.createPromise=_,exports.createRejectedPromise=It,exports.createResolvedPromise=Rt,exports.createSyncAllPromise=pt,exports.createSyncPromise=P,exports.createSyncRejectedPromise=yt,exports.createSyncResolvedPromise=dt,exports.createTaskScheduler=function(a,n){function f(){var n=0<h(v)+h(p);0<e&&(o||(o=O(function(){kt(v,e),kt(p,e),o&&(o.enabled=0<h(v)+h(p))},r)).unref(),o)&&(o.enabled=n)}function l(u,c){return u.st=m(),v.push(u),f(),function(t,e){function r(n){u.rj=u.rj||n||wt(At,u),u[N]=Pt,i(u),t=null,e&&e(n),e=null}var n=u.id;if(u.rj)r(u.rj);else{u[N]=r;try{var o=c(n);u.to&&j(o)&&(u.t=O(function(){r(wt("Timeout",u))},u.to)),Mn(o,function(n){i(u),e=null,t&&t(n),t=null},r)}catch(n){r(n)}}}}function i(n){zt(v,n),n.t&&n.t.cancel(),n.t=null,s&&s===n&&(s=null,h(v)+h(p)===0)&&(o&&o.cancel(),o=null)}var s,e,r,o,t,u,v=[],p=[],d=0,y=(n?n+".":"")+Et++,n=(a=a||_,{idle:!0,queue:function(n,t,e){var r,o,u,c=y+"."+d++,i=(t&&(c+="-("+t+")"),(t={id:c,cr:m(),to:e})[N]=function(n){i.rj=n||wt(At,i),i[N]=Pt},t);return i.p=s?(o=s,u=n,p.push(r=i),f(),a(function(n,t){r.id,o.id,Kn(o.p,function(){zt(p,r),l(r,u)(n,t)})})):a(l(i,n)),(s=i).p},setStaleTimeout:function(n,t){o&&o.cancel(),o=null,e=n,r=t||n/10,f()}});return dn(n,"idle",{g:function(){return h(v)+h(p)===0}}),u=function(){return{l:s,r:v,w:p}},St=St||{toString:function(){return"[[SchedulerState]]"}},A(t=n,xt=xt||{toString:function(){return"[[SchedulerName]]"}},{get:function(){return y}}),A(t,St,{get:u}),n},exports.doAwait=Mn,exports.doAwaitResponse=Kn,exports.doFinally=Qn,exports.setCreatePromiseImpl=function(n){mt=n?o(function(){return n}):null},exports.setDetaultIdleTimeout=function(n){vt=n},exports.setPromiseDebugState=function(n,t){Yn=n};
//# sourceMappingURL=ts-async.min.js.map

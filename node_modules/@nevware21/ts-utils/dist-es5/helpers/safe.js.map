{"version":3,"file":"safe.js","sourceRoot":"","sources":["../../src/helpers/safe.ts"],"names":[],"mappings":"AAAA;;;;;;GAMG;AA6BH;;;;;;;;;;;;;;;;;;;;;;;GAuBG;AACH,MAAM,UAAU,IAAI,CAAwC,IAAO,EAAE,QAAgB;IACjF,IAAI;QACA,OAAO;YACH,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,QAAQ,CAAC;SAChC,CAAC;KACL;IAAC,OAAO,CAAC,EAAE;QACR,OAAO,EAAE,CAAC,GAAA,EAAE,CAAC;KAChB;AACL,CAAC","sourcesContent":["/*\r\n * @nevware21/ts-utils\r\n * https://github.com/nevware21/ts-utils\r\n *\r\n * Copyright (c) 2022 Nevware21\r\n * Licensed under the MIT license.\r\n */\r\n\r\n/**\r\n * Infers the return type of the specified function\r\n * @since 0.10.5\r\n * @group Safe\r\n * @typeparam T - The type of the function which to infer the return type\r\n */\r\nexport type SafeReturnType<T extends (...args: any) => any> = T extends (...args: any) => infer R ? R : any\r\n\r\n/**\r\n * Defines the return value of the {@link safe} function, which is an object with either a value or an error\r\n * @since 0.10.5\r\n * @group Safe\r\n * @typeparam T - The type of the function to call\r\n * @typeparam R - The return type of the function\r\n */\r\nexport interface ISafeReturn<T extends (...args: any) => any> {\r\n    /**\r\n     * The value returned by the function call\r\n     */\r\n    v?: SafeReturnType<T>;\r\n\r\n    /**\r\n     * The error thrown by the function call\r\n     */\r\n    e?: Error;\r\n}\r\n\r\n/**\r\n * Call the specified function with zero or more individual arguments, the call will be wrapped in a try / catch\r\n * block and the result returned wrapped in an {@link ISafeReturn} instance. If the function call throws an\r\n * exception the {@link ISafeReturn.e error} property will contain the exception otherwise the {@link ISafeReturn.v value}\r\n * property will contain the value returned from the function.\r\n * @since 0.10.5\r\n * @group Safe\r\n * @param func - The function to call\r\n * @param argArray - An array of the arguments to pass to the function\r\n * @returns The return value of the function or undefined if an exception is thrown\r\n * @example\r\n * ```ts\r\n * let result = safe((value: string) => {\r\n *    return JSON.parse(value);\r\n * }, [\"{ invalid: json value\"]);\r\n *\r\n * // result.e instanceof SyntaxError\r\n *\r\n * let result2 = safe((value: string) => {\r\n *   return JSON.parse(value);\r\n * }, [\"{ valid: json value\"]);\r\n *\r\n * // result2.v === { valid: \"json value\" }\r\n */\r\nexport function safe<F extends (...args: unknown[]) => any>(func: F, argArray?: any[]): ISafeReturn<F> {\r\n    try {\r\n        return {\r\n            v: func.apply(this, argArray)\r\n        };\r\n    } catch (e) {\r\n        return { e };\r\n    }\r\n}\r\n"]}